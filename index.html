<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxRoot Remote Control</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            text-align: center; 
            background-color: #0f172a; 
            color: #f8fafc; 
            padding: 20px;
            margin: 0;
        }
        .container { max-width: 500px; margin: auto; }
        .card { 
            background: #1e293b; 
            border-radius: 20px; 
            padding: 25px; 
            margin-top: 20px; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            border: 1px solid #334155;
        }
        h1 { color: #38bdf8; font-size: 24px; }
        h3 { margin-bottom: 20px; color: #94a3b8; }
        
        button { 
            width: 100%; 
            padding: 18px; 
            margin: 10px 0; 
            border: none; 
            border-radius: 12px; 
            font-weight: bold; 
            font-size: 16px; 
            text-transform: uppercase;
            transition: 0.3s;
            cursor: pointer;
        }
        .btn-on { background: #22c55e; color: white; box-shadow: 0 4px 0 #166534; }
        .btn-on:active { transform: translateY(4px); box-shadow: none; }
        
        .btn-off { background: #ef4444; color: white; box-shadow: 0 4px 0 #991b1b; }
        .btn-off:active { transform: translateY(4px); box-shadow: none; }

        #status-display { 
            font-size: 28px; 
            font-weight: bold; 
            margin: 20px 0; 
            padding: 15px;
            border-radius: 10px;
            background: #334155;
            color: #fbbf24;
        }
        .info { font-size: 12px; color: #64748b; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>MAXROOT SYSTEM</h1>

    <div class="card">
        <h3>CONTROLLER (HP A)</h3>
        <button class="btn-on" onclick="kirim('ON')">Kirim Perintah: ON</button>
        <button class="btn-off" onclick="kirim('OFF')">Kirim Perintah: OFF</button>
    </div>

    <div class="card">
        <h3>RECEIVER (HP B)</h3>
        <div id="status-display">STANDBY</div>
        <p class="info">Ketuk layar HP B satu kali untuk mengaktifkan fitur anti-mati (Wake Lock).</p>
    </div>
</div>

<script>
    // --- 1. SETTING FIREBASE ---
    // GANTI URL DI BAWAH INI DENGAN URL FIREBASE KAMU SENDIRI
    const firebaseConfig = {
        databaseURL: "https://maxrooot-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };
    
    firebase.initializeApp(firebaseConfig);
    const dbRef = firebase.database().ref("jalur_kontrol");

    // --- 2. LOGIKA HP A (PENGIRIM) ---
    function kirim(cmd) {
        dbRef.set({
            perintah: cmd,
            timestamp: Date.now()
        });
    }

    // --- 3. LOGIKA HP B (PENERIMA) ---
    dbRef.on("value", (snapshot) => {
        const data = snapshot.val();
        if (data) {
            const statusBox = document.getElementById("status-display");
            statusBox.innerText = data.perintah;

            if (data.perintah === "ON") {
                statusBox.style.color = "#22c55e";
                triggerAction(true);
            } else {
                statusBox.style.color = "#ef4444";
                triggerAction(false);
            }
        }
    });

    function triggerAction(isActive) {
        if (isActive) {
            // HP akan bergetar saat menerima perintah ON
            if (navigator.vibrate) navigator.vibrate([300, 100, 300]);
            console.log("Aksi Dijalankan!");
        }
    }

    // --- 4. FITUR ANTI-MATI (WAKE LOCK) ---
    let wakeLock = null;
    document.addEventListener('click', async () => {
        if ('wakeLock' in navigator) {
            try {
                wakeLock = await navigator.wakeLock.request('screen');
                console.log("Layar akan tetap menyala");
            } catch (err) {
                console.log("Gagal mengaktifkan Wake Lock");
            }
        }
    });
</script>

</body>
</html>
